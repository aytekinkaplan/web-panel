<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>{{ ( activeProject$ | async )?.name }} settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Project Info</ion-card-title>
    </ion-card-header>
      <ion-list>
        <ion-item lines="none">
          <ion-label>
            <h2>Project Name:</h2>
            <p>{{ ( activeProject$ | async )?.name }}</p>
          </ion-label>
        </ion-item>
        <ion-item lines="none">
          <ion-label>
            <h2>Project Client ID:</h2>
            <p>{{ ( activeProject$ | async )?.id }} <sl-copy-button value="{{ ( activeProject$ | async )?.id }}"></sl-copy-button></p>
          </ion-label>
        </ion-item>
        <ion-item lines="none">
          <ion-label>
            <h2>Project Client Secret:</h2>
            <p>{{ ( activeProject$ | async )?.secret }} <sl-copy-button value="{{ ( activeProject$ | async )?.secret }}"></sl-copy-button></p>
          </ion-label>
        </ion-item>
      </ion-list>

  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Project Keys</ion-card-title>
    </ion-card-header>
    <ion-card-content>

      <ion-list>
        <ion-item *ngFor="let key of activeProjectKeys$ | async">
          <ion-label>
            <h2>{{ key.name }}</h2>
            <p>Token: {{ key.key }} <sl-copy-button value='{{ key.key }}'></sl-copy-button></p>

            <sl-details *ngIf="key.write" summary="Add Web Tracker Code">
              <p>You can put the code below before <code>&lt;/head&gt;</code> tag in your website:</p>
              <div class="code-example">
                <pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: rgb(240, 240, 240); color: rgb(68, 68, 68);"><span class="hljs-tag">&lt;<span class="hljs-name" style="font-weight: 700;">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string" style="color: rgb(136, 0, 0);">"module"</span><br>  <span class="hljs-attr">data-driplane-token</span>=<span class="hljs-string" style="color: rgb(136, 0, 0);">"{{ key.key }}"</span><br>  <span class="hljs-attr">src</span>=<span class="hljs-string" style="color: rgb(136, 0, 0);">"https://cdn.jsdelivr.net/npm/&#64;driplane/web&#64;beta/dist/driplane.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name" style="font-weight: 700;">script</span>&gt;</span></pre>

                <sl-copy-button value='&lt;script type="module" data-driplane-token="{{ key.key }}" src="https://cdn.jsdelivr.net/npm/&#64;driplane/web&#64;beta/dist/driplane.js"&gt;&lt;/script&gt;'></sl-copy-button>
              </div>
            </sl-details>
          </ion-label>
        </ion-item>
      </ion-list>

      <sl-details summary="Add New Key">
        <ion-item>
          <ion-input label="Key Name" labelPlacement="stacked" type="text"></ion-input>
        </ion-item>

        <ion-button expand="block" (click)="addProjectKey()">Add Key</ion-button>
      </sl-details>

    </ion-card-content>
  </ion-card>

</ion-content>

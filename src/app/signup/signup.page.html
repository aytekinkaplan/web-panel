<app-modal-view>
  <ion-title>Driplane Signup</ion-title>
  <form #form="ngForm" *ngIf="!success" (ngSubmit)="signUp(form)">
    <ion-list>
      <ion-item>
        <ion-input
          label="E-mail"
          labelPlacement="stacked"
          autocomplete="email"
          type="email"
          email
          name="username"
          [(ngModel)]="username"
          data-testid="usernameInput"
          required
          #email="ngModel"
        ></ion-input>
      </ion-item>
      <ion-text *ngIf="form.submitted && email.invalid" color="danger" data-testid="usernameErrorMessage">
        <p>Please write a valid email address</p>
      </ion-text>

      <ion-item>
        <ion-input
          label="New Password"
          labelPlacement="stacked"
          type="password"
          name="password"
          [(ngModel)]="password"
          data-testid="passwordInput"
          required
          autocomplete="new-password"
          #pass="ngModel"
        ></ion-input>
      </ion-item>
      <ion-text *ngIf="form.submitted && pass.invalid" color="danger" data-testid="passwordErrorMessage">
        <p>Write your pasword</p>
      </ion-text>
      <ion-item>
        <ion-input
          label="Verify Password"
          labelPlacement="stacked"
          type="password"
          name="password2"
          [(ngModel)]="password2"
          data-testid="passwordVerifyInput"
          required
          autocomplete="new-password"
          #pass2="ngModel"
        ></ion-input>
      </ion-item>
      <ion-text *ngIf="form.submitted && password !== password2" color="danger" data-testid="passwordVerifyErrorMessage">
        <p>Passwords don't match</p>
      </ion-text>
    </ion-list>
    <button type="submit"></button>
    <ion-button type="submit" expand="block" share="round" color="success" data-testid="signupButton"
      >Register</ion-button
    >

    <ion-item lines="none">
      <p>Do you already have an account?</p>
      <p>
        <ion-button routerLink="/login" data-testid="loginButton">Login</ion-button>
      </p></ion-item
    >
  </form>

  <ion-text *ngIf="success" class="success" data-testid="successMessage"
    >Please check your email and click the link to verify your
    registration.</ion-text
  >
</app-modal-view>
